<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!--Meta Responsive tag-->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" href="@{/favicon.ico}" type="image/x-icon">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{/asset/css/bootstrap.min.css}">
    <!-- Custom style.css -->
    <link rel="stylesheet" th:href="@{/asset/css/quicksand.css}">
    <link rel="stylesheet" th:href="@{/asset/css/style.css}">
    <!-- Font Awesome -->
    <link rel="stylesheet" th:href="@{/asset/css/fontawesome-all.min.css}">
    <link rel="stylesheet" th:href="@{/asset/css/fontawesome.css}">
    <!-- Animate CSS -->
    <link rel="stylesheet" th:href="@{/asset/css/animate.min.css}">
    <!-- Chartist CSS -->
    <link rel="stylesheet" th:href="@{/asset/css/chartist.min.css}">
    <!-- Map -->
    <link rel="stylesheet" th:href="@{/asset/css/jquery-jvectormap-2.0.2.css}">
    <!-- Bootstrap Calendar -->
    <link rel="stylesheet" th:href="@{/asset/css/calendar/bootstrap_calendar.css}">
    <!-- Nice select -->
    <link rel="stylesheet" th:href="@{/asset/css/nice-select.css}">
    <title>Admin</title>

</head>
<body>
<!--Page loader-->
<div class="loader-wrapper">
    <div class="loader-circle">
        <div class="loader-wave"></div>
    </div>
</div>
<!--Page loader-->

<!--Page Wrapper-->
<div class="container-fluid">

    <!--Header-->
    <div class="row header shadow-sm">

        <!--Logo-->
        <div class="col-sm-3 pl-0 text-center header-logo">
            <div class="bg-theme mr-3 pt-3 pb-2 mb-0">
                <h3 class="logo"><a href="#" class="text-secondary logo"><i class="fa fa-rocket"></i> Admin<span
                        class="small"></span></a></h3>
            </div>
        </div>
        <!--Logo-->

        <!--Header Menu-->
        <div class="col-sm-9 header-menu pt-2 pb-0">
            <div class="row">

                <!--Menu Icons-->
                <div class="col-sm-4 col-8 pl-0">
                    <!--Toggle sidebar-->
                    <span class="menu-icon" onclick="toggle_sidebar()">
                            <span id="sidebar-toggle-btn"></span>
                        </span>
                </div>
            </div>
        </div>
        <!--Header Menu-->
    </div>
    <!--Header-->

    <!--Main Content-->
    <div class="row main-content">
        <!--Sidebar left-->
        <div class="col-sm-3 col-xs-6 sidebar pl-0">
            <div class="inner-sidebar mr-3">
                <!--Image Avatar-->
                <div class="avatar text-center">
                    <img th:src="@{/asset/img/client-img4.png}" alt="" class="rounded-circle"/>
                    <p><strong>Jonathan Clarke</strong></p>
                </div>
                <!--Image Avatar-->

                <!--Sidebar Navigation Menu-->
                <div class="sidebar-menu-container">
                    <ul class="sidebar-menu mt-4 mb-4">
                        <li class="parent">
                            <a th:href="@{/admin}"><i class="fa fa-dashboard mr-3"> </i>
                                <span class="none">Class</span>
                            </a>
                        </li>
                        <li class="parent">
                            <a th:href="@{/admin/users}"><i class="fa fa-pencil-square mr-3"></i>
                                <span class="none">User</span>
                            </a>
                        </li>
                        <li class="parent">
                            <a th:href="@{/logout}"><i class="fa fa-puzzle-piece mr-3"></i>
                                <span class="none">Log Out</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!--Sidebar left-->

        <!--Content right-->
        <div class="col-sm-9 col-xs-12 content pt-3 pl-0">
            <h5 class="mb-3"><strong>Dashboard</strong></h5>

            <!--Dashboard widget-->
            <div class="mt-1 mb-3 button-container">
                <div class="row pl-0">
                    <div class="col-lg-4 col-md-4 col-sm-6 col-12 mb-3">
                        <div class="bg-white border shadow">
                            <div class="media p-4">
                                <div class="align-self-center mr-3 rounded-circle notify-icon bg-theme">
                                    <i class="fa fa-user"></i>
                                </div>
                                <div class="media-body pl-2">
                                    <h3 class="mt-0 mb-0"><strong th:text="${totalTutor}"></strong></h3>
                                    <p><small class="text-muted bc-description">Tutors</small></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-6 col-12 mb-3">
                        <div class="bg-white border shadow">
                            <div class="media p-4">
                                <div class="align-self-center mr-3 rounded-circle notify-icon bg-danger">
                                    <i class="fas fa-envelope-open"></i>
                                </div>
                                <div class="media-body pl-2">
                                    <h3 class="mt-0 mb-0"><strong th:text="${totalStudent}"></strong></h3>
                                    <p><small class="text-muted bc-description">Students</small></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-6 col-12 mb-3">
                        <div class="bg-theme border shadow">
                            <div class="media p-4">
                                <div class="align-self-center mr-3 rounded-circle notify-icon bg-white">
                                    <i class="fa fa-tags text-theme"></i>
                                </div>
                                <div class="media-body pl-2">
                                    <h3 class="mt-0 mb-0"><strong th:text="${totalClass}"></strong></h3>
                                    <p><small class="bc-description text-white">Total Classes</small></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--/Dashboard widget-->

            <div class="mt-4 mb-4 p-3 bg-white border shadow-sm lh-sm">
                <!--Order Listing-->
                <div class="product-list">

                    <div class="row border-bottom mb-4">
                        <div class="col-sm-8 pt-2">
                            <h6 class="mb-4 bc-header">User listing</h6>
                        </div>
                    </div>

                    <div>
                        <table class="table table-striped table-bordered" id="classTable">
                            <thead>
                            <tr>
                                <th></th>
                                <th>User ID</th>
                                <th>UserName</th>
                                <th>Role</th>
                                <th>Profile Image</th>
                                <th>Email</th>
                                <th>Create At</th>
                                <th>Action</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="user, iterStat : ${users}">
                                <td class="align-middle" th:text="${iterStat.index + 1}"></td>
                                <td class="align-middle" th:text="${user.userId}"></td>
                                <td class="align-middle" th:text="${user.userName}"></td>
                                <td class="align-middle" th:text="${user.role ?: 'N/A'}"></td>
                                <td class="align-middle">
                                    <img th:src="${user.profileImage}" alt="Profile Image" class="img-thumbnail" style="width: 50px; height: 50px;" />
                                </td>
                                <td class="align-middle" th:text="${user.email ?: 'N/A'}"></td>
                                <td class="align-middle" th:text="${#dates.format(user.createdAt, 'yyyy-MM-dd HH:mm:ss') ?: 'N/A'}"></td>
                                <td class="align-middle text-center">
                                    <form th:if="${!user.isBlocked()}" style="display:inline-block;" th:action="@{/admin/block}" method="post" onsubmit="return confirm('Are you sure you want to block this user?');">
                                        <input type="hidden" name="userId" th:value="${user.userId}" />
                                        <input type="hidden" name="block" value="true" />
                                        <button type="submit" class="btn btn-warning" title="Block User">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </form>
                                    <form th:if="${user.isBlocked()}" style="display:inline-block;" th:action="@{/admin/block}" method="post" onsubmit="return confirm('Are you sure you want to unblock this user?');">
                                        <input type="hidden" name="userId" th:value="${user.userId}" />
                                        <input type="hidden" name="block" value="false" />
                                        <button type="submit" class="btn btn-success" title="Block User">
                                            <i class="fas fa-ban"></i>
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!--/Order Listing-->
            </div>
        </div>
        <!--Content right-->
    </div>
    <!--Main Content-->

</div>
<!--Page Wrapper-->

<!-- jQuery -->
<script th:src="@{/asset/js/jquery.min.js}"></script>
<!-- Popper JS -->
<script th:src="@{/asset/js/popper.min.js}"></script>
<!-- Bootstrap -->
<script th:src="@{/asset/js/bootstrap.min.js}"></script>
<!-- Sweet alert JS -->
<script th:src="@{/asset/js/sweetalert.js}"></script>
<!-- Progressbar JS -->
<script th:src="@{/asset/js/progressbar.min.js}"></script>
<!-- Flot.JS -->
<script th:src="@{/asset/js/charts/jquery.flot.min.js}"></script>
<script th:src="@{/asset/js/charts/jquery.flot.pie.min.js}"></script>
<script th:src="@{/asset/js/charts/jquery.flot.categories.min.js}"></script>
<script th:src="@{/asset/js/charts/jquery.flot.stack.min.js}"></script>
<!-- Chart JS -->
<script th:src="@{/asset/js/charts/chart.min.js}"></script>
<!-- Chartist JS -->
<script th:src="@{/asset/js/charts/chartist.min.js}"></script>
<script th:src="@{/asset/js/charts/chartist-data.js}"></script>
<script th:src="@{/asset/js/charts/demo.js}"></script>
<!-- Maps -->
<script th:src="@{/asset/js/maps/jquery-jvectormap-2.0.2.min.js}"></script>
<script th:src="@{/asset/js/maps/jquery-jvectormap-world-mill-en.js}"></script>
<script th:src="@{/asset/js/maps/jvector-maps.js}"></script>
<!-- Bootstrap Calendar JS -->
<script th:src="@{/asset/js/calendar/bootstrap_calendar.js}"></script>
<script th:src="@{/asset/js/calendar/demo.js}"></script>
<!-- Nice select -->
<script th:src="@{/asset/js/jquery.nice-select.min.js}"></script>

<!-- Custom Js Script -->
<script th:src="@{https://code.jquery.com/jquery-3.5.1.min.js}"></script>
<script th:src="@{https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js}"></script>
<script th:src="@{/asset/js/custom.js}"></script>

<!-- Nice select -->
<script>
    $('.bulk-actions').niceSelect();
</script>

<link rel="stylesheet" th:href="@{https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css}">

<script>
    $(document).ready(function () {
        $('#classTable').DataTable({
            "paging": true,
            "searching": true,
            "ordering": true
        });
    });
</script>
</body>

</html>